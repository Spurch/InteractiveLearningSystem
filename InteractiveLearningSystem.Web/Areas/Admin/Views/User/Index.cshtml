@model IEnumerable<InteractiveLearningSystem.Models.User>

@{
	ViewBag.Title = "Index";
	//Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="well text-center">
	<h2>@ViewBag.RoleName List</h2>
</div>

<div class="well">
	<table class="table">
		<tr>
			<th>
				Avatar
			</th>
			<th>
				Username
			</th>
			@if (ViewBag.RoleName != "Moderator" && ViewBag.RoleName != "Adviser")
			{
				<th>
					Clan
				</th>
			}
			<th>
				Guild
			</th>
			<th>
				Points
			</th>
			<th>
				Exp
			</th>
			<th>
				Level
			</th>
		</tr>

		@foreach (var item in Model)
		{
			<tr>
				<td>
					<img src="@Url.Content(item.AvatarUrl)" style="width: 3.4em; height: 3.4em;" />
				</td>
				<td>
					<a href="@Url.Action("Details", "User", new { id = item.Id })">@Html.DisplayFor(modelItem => item.UserName)</a>
				</td>
				@if (ViewBag.RoleName != "Moderator" && ViewBag.RoleName != "Adviser")
				{
					<td>
						<a href="@Url.Action("Details", "Group", new { id = 0})">@Html.DisplayFor(modelItem => item.Group.Name)</a>
					</td>
				}
				<td>
					@if (ViewBag.RoleName == "Moderator")
					{
						<a href="@Url.Action("Details", "School", new { id = 0})">@Html.DisplayFor(modelItem => item.Moderator.First().Name)</a>	
					}
					else if (ViewBag.RoleName == "Adviser")
					{
						<a href="@Url.Action("Details", "School", new { id = 0})">@Html.DisplayFor(modelItem => item.Consultant.First().Name)</a>
					}
					else
					{
						<a href="@Url.Action("Details", "School", new { id = 0})">@Html.DisplayFor(modelItem => item.Group.School.Name)</a>
					}
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Points)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Experience)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Level)
				</td>
			</tr>
		}

	</table>
</div>